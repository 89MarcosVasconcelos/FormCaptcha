<html>
<head>
    <title>How to validate Google reCAPTCHA in JavaScript</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Lato:300,400,500' rel='stylesheet' type='text/css'>
    <link href='custom.css' rel='stylesheet' type='text/css'>       
    <style>
    .list-unstyled {
        color: red;
    }
    </style>
</head>

<body>
    <div class="container">

        <div class="row">

            <div class="col-xl-8 offset-xl-2">

                <h2 class="mb-3">Google reCAPTCHA JavaScript Validation</h2> 

                <form id="contact-form2" id='contact-form2' method="post" action="teste.php" role="form">

                    <div class="messages"></div>

                    <div class="controls">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label for="form_name">First Name*</label>
                                    <input id="form_name" type="text" name="name" class="form-control" placeholder="Enter your first name"  value='teste' required="required"
                                        data-error="Firstname is required.">
                                    <div class="help-block with-errors"></div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label for="form_lastname">Last Name*</label>
                                    <input id="form_lastname" type="text" name="surname" class="form-control" placeholder="Enter your last name" value='teste' required="required"
                                        data-error="Lastname is required.">
                                    <div class="help-block with-errors"></div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label for="form_email">Email*</label>
                                    <input id="form_email" type="email" name="email" class="form-control" placeholder="Enter your email"  value='teste@teste.com' required="required"
                                        data-error="Valid email is required.">
                                    <div class="help-block with-errors"></div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label for="form_phone">Phone</label>
                                    <input id="form_phone" type="tel" name="phone" class="form-control"  value='999999999' placeholder="Enter your phone no.">
                                    <div class="help-block with-errors"></div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="form_message">Message*</label>
                            <textarea id="form_message" name="message" class="form-control" placeholder="Enter your message" rows="4" required="required"
                                data-error="Please, leave us a message."></textarea>
                            <div class="help-block with-errors"></div>
                        </div>
                        <div class="form-group">
						
                            <div class="g-recaptcha" data-sitekey="6LehO8gUAAAAAAcOEamYPOViZTD7PslHlGiYXjX_" data-callback="verifyRecaptchaCallback" data-expired-callback="expiredRecaptchaCallback" required></div>
                            
                            <div class="help-block with-errors"></div>
                        
                        </div>
                        <input type="submit" class="btn btn-success btn-send" value="Send message" onsubmit='return validar()'>
                    </div>
                </form>
            </div>
            <!-- /.8 -->

        </div>
        <!-- /.row-->

    </div>
    <!-- /.container-->

    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src='https://www.google.com/recaptcha/api.js'></script>
    <script src="validator.js"></script>
    <script>
/*	$(function () {

    window.verifyRecaptchaCallback = function (response) {
        $('input[data-recaptcha]').val(response).trigger('change');
    }

    window.expiredRecaptchaCallback = function () {
        $('input[data-recaptcha]').val("").trigger('change');
    }

    $('#contact-form2').validator();

    $('#contact-form2').on('submit', function (e) {
        if (!e.isDefaultPrevented()) {
            
            $.ajax({
                type: "POST",
                data: $(this).serialize(),
                success: function (data) {
                    var messageAlert = 'alert-' + data.type;
                    var messageText = data.message;

                    var alertBox = '<div class="alert ' + messageAlert + ' alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>' + messageText + '</div>';
                    if (messageAlert && messageText) {
                        $('#contact-form2').find('.messages').html(alertBox);
                        $('#contact-form2')[0].reset();
                        grecaptcha.reset();
                    }
                }
            });
            return false;
        }
    })
});*/

document.getElementById("#contact-form2").addEventListener("submit",function(evt)
  {
  
  var response = grecaptcha.getResponse();
  if(response.length == 0) 
  { 
    //reCaptcha not verified
    alert("please verify you are humann!"); 
    evt.preventDefault();
    return false;
  }
  //captcha verified
  //do the rest of your validations here
  
});

/*
function validar(){
    var recaptchaRes = grecaptcha.getResponse();
    var message = "";
alert(recaptchaRes);
    if(typeof recaptchaRes != 'string') {
        // You can return the message to user
        message = "Please complete the reCAPTCHA challenge!";
        return false;
    } 
}*/
	
	</script>
</body>

</html>